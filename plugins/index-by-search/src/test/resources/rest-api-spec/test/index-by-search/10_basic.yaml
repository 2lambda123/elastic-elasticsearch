---
"Response format":
  - do:
      index:
        index:  test
        type:   foo
        id:     1
        body:   { "text": "test" }
  - do:
      indices.refresh: {}

  - do:
      index_by_search:
        body:
          source:
            index: test
            type: [foo, bar]
          index:
            index: test
            type: baz

  - match: {indexed: 1}
  - is_true: took

---
"Multi index search with types copied from hits":
  - do:
      index:
        index:  twitter
        type:   tweet
        id:     1
        body:   { "user": "kimchy" }
  - do:
      index:
        index:  blog
        type:   post
        id:     1
        body:   { "user": "kimchy" }
  - do:
      indices.refresh: {}

  - do:
      index_by_search:
        body:
          source:
            index: [twitter, blog]
          index:
            index: all_together
  - do:
      indices.refresh: {}

  - do:
      search:
        index: all_together
        type: tweet
        body:
          query:
            match:
              user: kimchy
  - match: { hits.total: 1 }

  - do:
      search:
        index: all_together
        type: post
        body:
          query:
            match:
              user: kimchy
  - match: { hits.total: 1 }
