---
"no body fails":
  - do:
      catch: /body required/
      index_by_search: {}

---
"junk in body fails":
  - do:
      catch: /unknown field \[junk\]/
      index_by_search:
        body:
          junk:
            more_junk:

---
"junk in source fails":
  - do:
      catch: /unknown field \[junk\]/
      index_by_search:
        body:
          source:
            junk: {}

---
"junk in index fails":
  - do:
      catch: /unknown field \[junk\]/
      index_by_search:
        body:
          index:
            junk: {}

---
"no index on destination fails":
  - do:
      catch: /index must be specified/
      index_by_search:
        body:
          index: {}

---
"search size is accepted":
  - do:
      index:
        index:   test
        type:    foo
        id:      1
        body:    { "text": "test" }
  - do:
      index_by_search:
        body:
          source:
            search:
              size: 1000
          index:
            index: dest

---
"search size fails if not a number":
  - do:
      catch: '/NumberFormatException: For input string: "cat"/'
      index_by_search:
        body:
          source:
            search:
              size: cat
          index:
            index: dest

---
"search from is not supported":
  - do:
      catch: /from is not supported in this context/
      index_by_search:
        body:
          source:
            search:
              from: 1
          index:
            index: dest

---
"overwriting version is not supported":
  - do:
      catch: /.*\[index\] unknown field \[version\].*/
      index_by_search:
        body:
          index:
            version: 10

---
"overwriting version type is not supported":
  - do:
      catch: /.*\[index\] unknown field \[version_type\].*/
      index_by_search:
        body:
          index:
            version_type: external

---
"bad conflicts is error":
  - do:
      catch: /.*conflicts may only be "proceed" or "abort" but was \[cat\]/
      index_by_search:
        body:
          conflicts: cat
