---
"line_92":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: setup kibana sample data
  - do:
      raw:
        method: POST
        path: "_ml/data_frame/analytics/loganalytics/_update"
        body: |
          {
            "model_memory_limit": "200mb"
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "id" : "loganalytics",
          "create_time" : 1656364565517,
          "version" : "8.4.0",
          "authorization" : {
            "roles" : [
              "superuser"
            ]
          },
          "description" : "Outlier detection on log data",
          "source" : {
            "index" : [
              "logdata"
            ],
            "query" : {
              "match_all" : { }
            }
          },
          "dest" : {
            "index" : "logdata_out",
            "results_field" : "ml"
          },
          "analysis" : {
            "outlier_detection" : {
              "compute_feature_influence" : true,
              "outlier_fraction" : 0.05,
              "standardization_enabled" : true
            }
          },
          "model_memory_limit" : "200mb",
          "allow_lazy_start" : false,
          "max_num_threads" : 1
        }
