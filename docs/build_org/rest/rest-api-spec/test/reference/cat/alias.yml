---
"cat-aliases-example":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "test1"
        body: |
          {
            "aliases": {
              "alias1": {},
              "alias2": {
                "filter": {
                  "match": {
                    "user.id": "kimchy"
                  }
                }
              },
              "alias3": {
                "routing": "1"
              },
              "alias4": {
                "index_routing": "2",
                "search_routing": "1,2"
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "_cat/aliases"
        v: "true"
  - match:
      $body:
        /alias  \s+index \s+filter \s+routing.index \s+routing.search \s+is_write_index\s*
         alias1 \s+test1 \s+-      \s+-            \s+-              \s+-\s*
         alias2 \s+test1 \s+[*]      \s+-            \s+-              \s+-\s*
         alias3 \s+test1 \s+-      \s+1            \s+1              \s+-\s*
         alias4 \s+test1 \s+-      \s+2            \s+1,2            \s+-\s*/
