---
"line_25":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup kibana_sample_data_ecommerce

  - do:
        indices.create:
          index: kibana_sample_data_ecommerce
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 0
            mappings:
              properties:
                order_date:
                  type: date

  - do:
      raw:
        method: GET
        path: "kibana_sample_data_ecommerce/_search"
        size: "0"
        track_total_hits: "false"
        body: |
          {
            "aggregations": {
              "sampling": {
                "random_sampler": {
                  "probability": 0.1
                },
                "aggs": {
                  "price_percentiles": {
                    "percentiles": {
                      "field": "taxful_total_price"
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
