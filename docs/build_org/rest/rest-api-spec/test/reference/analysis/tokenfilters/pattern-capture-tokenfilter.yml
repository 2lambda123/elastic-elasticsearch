---
"line_51":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "test"
        body: |
          {
             "settings" : {
                "analysis" : {
                   "filter" : {
                      "code" : {
                         "type" : "pattern_capture",
                         "preserve_original" : true,
                         "patterns" : [
                            "(\\p{Ll}+|\\p{Lu}\\p{Ll}+|\\p{Lu}+)",
                            "(\\d+)"
                         ]
                      }
                   },
                   "analyzer" : {
                      "code" : {
                         "tokenizer" : "pattern",
                         "filter" : [ "code", "lowercase" ]
                      }
                   }
                }
             }
          }
  - is_false: _shards.failures
---
"line_91":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "test"
        body: |
          {
             "settings" : {
                "analysis" : {
                   "filter" : {
                      "email" : {
                         "type" : "pattern_capture",
                         "preserve_original" : true,
                         "patterns" : [
                            "([^@]+)",
                            "(\\p{L}+)",
                            "(\\d+)",
                            "@(.+)"
                         ]
                      }
                   },
                   "analyzer" : {
                      "email" : {
                         "tokenizer" : "uax_url_email",
                         "filter" : [ "email", "lowercase",  "unique" ]
                      }
                   }
                }
             }
          }
  - is_false: _shards.failures
