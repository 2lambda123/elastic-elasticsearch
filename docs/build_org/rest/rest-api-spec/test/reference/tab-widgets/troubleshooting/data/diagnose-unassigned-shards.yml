---
"line_3":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "my-index-000001"
        master_timeout: "1s"
        timeout: "1s"
        body: |
          {
            "settings": {
              "index.routing.allocation.include._name": "nonexistent_node",
              "index.routing.allocation.include._tier_preference": null
            }
          }
  - is_false: _shards.failures
---
"line_40":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_cat/shards"
        v: "true"
        h: "index,shard,prirep,state,node,unassigned.reason"
        s: "state"
---
"line_72":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: illustration purposes only
  - do:
      raw:
        method: GET
        path: "_cluster/allocation/explain"
        body: |
          {
            "index": "my-index-000001",
            "shard": 0,
            "primary": true
          }
  - is_false: _shards.failures
---
"line_143":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "my-index-000001"
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "my-index-000001/_settings"
        flat_settings: "true"
        include_defaults: "true"
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "_cluster/settings"
        flat_settings: "true"
        include_defaults: "true"
  - is_false: _shards.failures
---
"line_166":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_cat/shards"
        v: "true"
        h: "index,shard,prirep,state,node,unassigned.reason"
        s: "state"
---
"line_198":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: illustration purposes only
  - do:
      raw:
        method: GET
        path: "_cluster/allocation/explain"
        body: |
          {
            "index": "my-index-000001",
            "shard": 0,
            "primary": true
          }
  - is_false: _shards.failures
---
"line_269":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "my-index-000001"
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "my-index-000001/_settings"
        flat_settings: "true"
        include_defaults: "true"
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "_cluster/settings"
        flat_settings: "true"
        include_defaults: "true"
  - is_false: _shards.failures
