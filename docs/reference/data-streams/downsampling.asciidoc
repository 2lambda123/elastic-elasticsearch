ifeval::["{release-state}"=="unreleased"]
[[downsampling]]
=== Downsampling a time series data stream

The volume of metrics data collected in your <<tsds,time series data stream>> can grow rapidly over time. As well, as the time series data ages it become less relevant.

Downsampling reduces your metrics storage volume by replacing older time series data with data of a higher sampling time interval (lower granularity) together with statistical representations of the original data, including the `min`, `max`, `sum`, `value_count`, and `average` for each metric. Time series dimensions are stored unchanged.

In effect, downsampling enables you to trade data resolution for storage size. Using downsampling with an <<index-lifecycle-management,{ilm} ({ilm-init})>> policy ensures that your older, less relevant, less frequently queried data is stored efficiently, allowing for a much lower metrics data volume and, as a result, a greatly reduced TCO.

[discrete]
[[how-downsampling-works]]
=== How it works

A <<time-series,time series>> is a sequence of observations taken over time for a specific entity. The observed samples can be represented as a continuous function, where the time series dimensions remain constant and the time series metrics change over time.

//.Sampling a continuous function
image::images/data-streams/time-series-function.png[align="center"]

In an Elasticsearch index, a single document is created for each timestamp, containing the immutable time series dimensions, together with the metrics names and the changing metrics values. For a single timestamp, several time series dimensions and metrics may be stored.

//.Metric anatomy
image::images/data-streams/time-series-metric-anatomy.png[align="center"]

For your most current and relevant data, the metrics series typically has a low sampling time interval, so it's optimized for queries that require very data resolution.

.Original metrics series
image::images/data-streams/time-series-original.png[align="center"]

Downsampling works on older, less relevant data by replacing the original time series with a data stream of a higher sampling interval, together with statistical representations based off of the original data. Where the original metrics samples may have been taken, for example, every ten seconds, as the data ages you may choose to reduce the sample granularity to hourly or daily. Or, for your `cold` archival data, you may choose to reduce the granularity to monthly or even less frequent, depending on your needs.

.Downsampled metrics series
image::images/data-streams/time-series-downsampled.png[align="center"]


[discrete]
[[try-out-downsampling]]
=== Try it out

To take downsampling for a test run, try our example of <<downsampling-example-manual,running downsampling manually>>.

Downsampling can easily be added to your ILM policy. To learn how, try our <<downsampling-example-ilm,Configure downsampling with ILM>> example.

endif::[]