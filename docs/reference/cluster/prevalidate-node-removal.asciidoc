[[prevalidate-node-removal-api]]
=== Prevalidate node removal API
++++
<titleabbrev>Prevalidate node removal</titleabbrev>
++++

This API is currently experimental for internal use by Elastic software only.

NOTE: {cloud-only}

Prevalidate node removal.

[[prevalidate-node-removal-api-request]]
==== {api-request-title}

`GET /_internal/prevalidate_node_removal/<node>`

[[prevalidate-node-removal-api-prereqs]]
==== {api-prereq-title}

* If the {es} {security-features} are enabled, you must have the `monitor` or `manage` <<privileges-list-cluster,cluster privilege>> to use this API.

[[prevalidate-node-removal-api-desc]]
==== {api-description-title}

This API allows validating whether it is safe to remove the specified node(s) from the cluster. In case the cluster has a RED health status, this verifies that removal of the node(s) would not risk removing the last remaining copy of an unassigned shard.

The response includes the overall safety of the removal of the specified nodes, and a detailed response for each node. The node-specific part of the response also includes more details on why removal of that node might not be safe.

The result of the prevalidation is expressed as either `YES`, `NO`, or `UNKNOWN`.

[[prevalidate-node-removal-api-path-params]]
==== {api-path-parms-title}

include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=node-id]
[[prevalidate-node-removal-api-example]]
==== {api-examples-title}

This example validates whether it is safe to remove the nodes `node1` and `node2`.

[source,console]
--------------------------------------------------
GET /_internal/prevalidate_node_removal/node1,node2
--------------------------------------------------
// TEST[skip:todo]

The API returns the following response:

[source,console-result]
--------------------------------------------------
{
    "overall_result": {
        "is_safe": "UNKNOWN",
        "reason": ""
    },
    "per_node_result": {
        "node1": {
            "is_safe": "YES",
            "reason": ""
        },
        "node2": {
            "is_safe": "UNKNOWN",
            "reason": "no response from the node"
        }
    }
}
--------------------------------------------------
