[[cluster-allocation-explain]]
=== Cluster allocation explain API
++++
<titleabbrev>Cluster allocation explain</titleabbrev>
++++

Provides an explanation for a shard's current allocation.


[[cluster-allocation-explain-api-request]]
==== {api-request-title}

`GET _cluster/allocation/explain`

`POST _cluster/allocation/explain`

[[cluster-allocation-explain-api-prereqs]]
==== {api-prereq-title}

* If the {es} {security-features} are enabled, you must have the `monitor` or
`manage` <<privileges-list-cluster,cluster privilege>> to use this API.

[[cluster-allocation-explain-api-desc]]
==== {api-description-title}

The purpose of the cluster allocation explain API is to provide
explanations for shard allocations in the cluster. For unassigned shards,
the explain API provides an explanation for why the shard is unassigned.
For assigned shards, the explain API provides an explanation for why the
shard is remaining on its current node and has not moved or rebalanced to
another node. This API can be very useful when attempting to diagnose why a
shard is unassigned or why a shard continues to remain on its current node when
you might expect otherwise.

[[cluster-allocation-explain-api-query-params]]
==== {api-query-parms-title}

`include_disk_info`::
    (Optional, Boolean) If `true`, returns information about disk usage and
    shard sizes. Defaults to `false`.

`include_yes_decisions`::
    (Optional, Boolean) If `true`, returns 'YES' decisions in explanation.
    Defaults to `false`.

[[cluster-allocation-explain-api-request-body]]
==== {api-request-body-title}

`current_node`::
    (Optional, string) Specifies the node ID or the name of the node currently
    holding the shard to explain. To explain an unassigned shard, omit this
    parameter.

`index`::
    (Optional, string) Specifies the name of the index that you would like an
    explanation for.

`primary`::
    (Optional, Boolean) If `true`, returns explanation for the primary shard
    for the given shard ID.

`shard`::
    (Optional, integer) Specifies the ID of the shard that you would like an
    explanation for.

[[cluster-allocation-explain-api-examples]]
==== {api-examples-title}

[source,console]
----
GET _cluster/allocation/explain
{
  "index": "my-index-000001",
  "shard": 0,
  "primary": false,
  "current_node": "my-node"
}
----
// TEST[setup:my_index]
// TEST[s/"primary": false,/"primary": false/]
// TEST[s/"current_node": "my-node"//]

Find further examples for using this API
<<cluster-allocation-explain-examples,here>>.