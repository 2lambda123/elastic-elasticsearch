[[modules-scripting]]
= Scripting

[partintro]
--
With scripting, you can evaluate custom expressions in {es}. For example, you
can use a script to return a computed value as a field or evaluate a custom
score for a query.

The default scripting language is <<modules-scripting-painless,Painless>>.
Additional `lang` plugins are available to run scripts written in other
languages. You can specify the language of the script anywhere that scripts run.

[discrete]
[[scripts-and-search-speed]]
== Scripts and search speed

Scripts can't use {es}'s index structures or related optimizations, which can
sometimes result in slower search speeds.

If you often use scripts to transform indexed data, you can speed up search by
making these changes during ingest instead. However, that often means slower
index speeds.

[discrete]
[[modules-scripting-using-caching]]
== Script caching

All scripts are cached by default so that they only need to be recompiled
when updates occur. By default, scripts do not have a time-based expiration.
You can change this behavior by using the `script.cache.expire` setting.
Use the `script.cache.max_size` setting to configure the size of the cache.

NOTE: The size of scripts is limited to 65,535 bytes. Set the value of `script.max_size_in_bytes` to increase that soft limit. If your scripts are
really large, then consider using a
<<modules-scripting-engine,native script engine>>.

[discrete]
[[scripting-available-languages]]
== Available scripting languages

Painless is purpose-built for {es}, can be used for any purpose in the
scripting APIs, and provides the most flexibility. The other languages are less
flexible, but typically have higher performance for certain tasks.

[cols="<,<,<,<",options="header",]
|========
|Language
    |Sandboxed
    |Required plugin
    |Purpose

|<<modules-scripting-painless,`painless`>>
    |{yes-icon}
    |Built-in
    |Purpose-built for {es}

|<<modules-scripting-expression, `expression`>>
    |{yes-icon}
    |Built-in
    |Fast custom ranking and sorting

|<<search-template, `mustache`>>
    |{yes-icon}
    |Built-in
    |Templates

|<<modules-scripting-engine, `java`>>
    |{no-icon}
    |You write it!
    |Expert API
|========

[WARNING]
.Scripts and security
=================================================

Languages that are sandboxed are designed with security in mind. However, non-
sandboxed languages can be a security issue, please read
<<modules-scripting-security, Scripting and security>> for more details.

=================================================
--

include::scripting/painless.asciidoc[]

include::scripting/using.asciidoc[]

include::scripting/fields.asciidoc[]

include::scripting/security.asciidoc[]

include::scripting/expression.asciidoc[]

include::scripting/engine.asciidoc[]
