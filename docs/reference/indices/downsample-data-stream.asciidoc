[role="xpack"]
[[indices-downsample-data-stream]]
=== Downsample API
++++
<titleabbrev>Downsample</titleabbrev>
++++

preview::[]

Aggregates a <<tsds,time series data stream>> index and stores pre-computed
statistical summaries (`min`, `max`, `sum`, `value_count` and `avg`) for each
metric field grouped by a configured time interval. For example, a time series
index that contains metrics sampled every 10 seconds can be downsampled to an
hourly index. All documents within an hour interval are summarized and stored as
a single document and stored in the downsample index.

Check our <<downsampling,Downsampling>> documentation for an overview and
examples of running downsampling on time series indices.

[source,console]
----
POST /my-time-series-index/_downsample/my-downsampled-time-series-index
{
    "fixed_interval": "1d"
}
----
// TEST[skip: TBD]

[[downsample-api-request]]
==== {api-request-title}

`POST /<source-index>/_downsample/<output-downsampled-index>`

[[downsample-api-prereqs]]
==== {api-prereq-title}

* Only indices in a <<tsds,time series data stream>> are supported.

* If the {es} {security-features} are enabled, you must have the `create_index`
or `manage` <<privileges-list-indices,index privilege>> for the data stream.

The source index must be read only (`index.blocks.write: true`) or else the
`downsample` action will fail with an error.

[[downsample-api-path-params]]
==== {api-path-parms-title}

`<source-index>`::
(Optional, string) Name of the time series index to downsample.

`<output-downsampled_index>`::
+
--
(Required, string) Name of the index to create. 

include::{es-repo-dir}/indices/create-index.asciidoc[tag=index-name-reqs]
--

[role="child_attributes"]
[[downsample-api-query-parms]]
==== {api-query-parms-title}

`fixed_interval`:: (Required, <<time-units,time units>>) The interval at which
to aggregate the original time series index. For example, `60m` produces a
document for each 60 minute (hourly) interval. This follows standard time
formatting syntax as used elsewhere in {es}.
+
NOTE: Smaller, more granular intervals take up proportionally more space.
