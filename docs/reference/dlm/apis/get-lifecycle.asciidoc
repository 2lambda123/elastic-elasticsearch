[[dlm-get-lifecycle]]
=== Get the lifecycle of a data stream
++++
<titleabbrev>Get Data Stream Lifecycle</titleabbrev>
++++

Gets the lifecycle of a set of data streams. This API is in experimental:[].

[[dlm-get-lifecycle-request]]
==== {api-request-title}

`GET _data_stream/_lifecycle`
`GET _data_stream/<data-stream>/_lifecycle`

[[dlm-get-lifecycle-prereqs]]
==== {api-prereq-title}

// TODO Update security
// * If the {es} {security-features} are enabled, you must have the <role>
// cluster privilege to use this API. For more information, see
// <<security-privileges>>.

[[dlm-get-lifecycle-desc]]
==== {api-description-title}

Gets the lifecycle of the specified data streams. If a data stream does not have a lifecycle defined then it will
be ommited from the list.

[[dlm-get-lifecycle-path-params]]
==== {api-path-parms-title}

`<data-stream>`::
(Required, string) Comma-separated list of data streams used to limit the request. Supports wildcards (`*`).
To target all data streams omit this parameter or use `*` or `_all`.

[role="child_attributes"]
[[get-data-lifecycle-api-query-parms]]
==== {api-query-parms-title}

include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=ds-expand-wildcards]
+
Defaults to `open`.

`include_defaults`::
(Optional, Boolean) If `true`, return all default settings in the response.
Defaults to `false`.

[role="child_attributes"]
[[get-lifecycle-api-response-body]]
==== {api-response-body-title}

`data_streams`::
(array of objects)
Contains information about retrieved data stream lifecycles.
+
.Properties of objects in `data_streams`
[%collapsible%open]
====
`name`::
(string)
Name of the data stream.
`lifecycle`::
(object)
+
.Properties of `lifecycle`
[%collapsible%open]
=====
`data_retention`::
(string)
If defined, every document added to this data stream will be stored at least for this time frame. Any time after this
duration the document could be deleted. When empty, every document in this data stream will be stored indefinitely.

`rollover`::
(object)
The conditions which will trigger the rollover of a backing index as configured by the cluster setting
`cluster.dlm.default.rollover`. This property is an implementation detail and it will only be retrieved when the query
param `include_defaults` is set to `true`. The contents of this field are subject to change.
=====
====

[[dlm-get-lifecycle-example]]
==== {api-examples-title}

The following example retrieves the lifecycle of the existing data streams:

//////////////////////////

[source,console]
--------------------------------------------------
PUT _index_template/my-data-stream-template
{
  "index_patterns": ["my-data-stream*"],
  "composed_of": [],
  "data_stream": {}
}

PUT _data_stream/my-data-stream

--------------------------------------------------
// TEST

//////////////////////////

[source,console]
--------------------------------------------------
PUT _index_template/my-data-stream-template
{
  "index_patterns": ["my-data-stream*"],
  "composed_of": [],
  "template": {
    "lifecycle": {
     "data_retention": "10d"
    }
  },
  "data_stream": {}
}

PUT _data_stream/my-data-stream

PUT _data_stream/my-data-stream2

PUT _data_stream/my-data-stream-no-lifecycle

DELETE _data_stream/my-data-stream-no-lifecycle/_lifecycle
--------------------------------------------------
// TEST[continued]

The response will look like the following:

[source,console-result]
--------------------------------------------------
{
  "data_streams": [
    {
      "name": "my-data-stream",
      "lifecycle": {
        "data_retention": "10d"
      }
    },
    {
      "name": "my-data-stream2",
      "lifecycle": {
        "data_retention": "10d"
      }
    }
  ]
}
--------------------------------------------------
