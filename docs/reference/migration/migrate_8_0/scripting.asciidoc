[discrete]
[[breaking_80_scripting_changes]]
==== Scripting changes

//NOTE: The notable-breaking-changes tagged regions are re-used in the
//Installation and Upgrade Guide

//tag::notable-breaking-changes[]
.The `JodaCompatibleDateTime` class has been removed.
[%collapsible]
====
*Details* +
As a transition from Joda datetime to Java datetime, scripting used
an intermediate class called `JodaCompatibleDateTime`. This class has
been removed and is replaced by `ZonedDateTime`. Any use of casting
to a `JodaCompatibleDateTime` in a script will result in a compilation
error, and may not allow the upgraded node to start.

*Impact* +
Before upgrading, replace `getDayOfWeek` with `getDayOfWeekEnum().value` in any
scripts. Any use of `getDayOfWeek` expecting a return value of `int` will result
in a compilation error or runtime error and may not allow the upgraded node to
start.
====

.Empty scripts/templates are no longer allowed as stored scripts.
[%collapsible]
====
*Details* +
Empty scripts/templates cannot be specified as the source of a
PutStoredScript action.

*Impact* +
Before upgrading, remove stored scripts/templates that are empty. Otherwise,
these scripts will be dropped, and may not align with the scripts on older
nodes.
====

.The `code` field can no longer be specified as part of a stored script/template.
[%collapsible]
====
*Details* +
The `code` field is replaced by the `source` as the only way to specify the
source of a script.

*Impact* +
Before upgrading, any calls to PutStoredScript should use `source` instead
of `code`.
====
// end::notable-breaking-changes[]