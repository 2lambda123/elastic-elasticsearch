[float]
[[breaking_80_node_changes]]
=== Node changes

//NOTE: The notable-breaking-changes tagged regions are re-used in the
//Installation and Upgrade Guide
//tag::notable-breaking-changes[]

// end::notable-breaking-changes[]

[float]
==== Removal of `node.max_local_storage_nodes` setting

The `node.max_local_storage_nodes` setting was deprecated in 7.x and
has been removed in 8.0. Nodes should be run on separate data paths
to ensure that each node is consistently assigned to the same data path.

[float]
==== Change of data folder layout

While data was previously stored in `$DATA_DIR/nodes/$nodeOrdinal`, it
has now, with the removal of the `node.max_local_storage_nodes` setting,
moved directly to `$DATA_DIR`. Upon startup, Elasticsearch will check
to see if there is data in the old location, and automatically move it
to the new location. This automatic migration only works if `$nodeOrdinal`
is 0, i.e., multiple node instances have not previously run on the same
data path, which required for `node.max_local_storage_nodes` to explicitly
be configured. In case where the automatic migration cannot be done due to
ambiguity of `$nodeOrdinal` subfolders, the data path (i.e. `path.data`
setting) can either be adjusted for each node instance to one of the
`$nodeOrdinal` subfolders, or preferably the contents of the `$nodeOrdinal`
subfolders can be manually moved into separate new folders, with `path.data`
then set to one of these folders for each node instance.
