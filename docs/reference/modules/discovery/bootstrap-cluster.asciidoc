[[modules-discovery-bootstrap-cluster]]
=== Bootstrapping a cluster

Starting an Elasticsearch cluster for the very first time requires a
cluster bootstrapping step.

The simplest way to bootstrap a cluster is by specifying the node names
or transport addresses of at least a non-empty subset of the master-eligible nodes
before start-up. The node setting `cluster.initial_master_nodes`, which
takes a list of node names or transport addresses, can be either specified
on the command line when starting up the nodes, or be added to the node
configuration file `elasticsearch.yml`.

For a cluster with 3 master-eligible nodes (named master-a, master-b, and master-c) and
Note that if you have not explicitly configured a node name, this
name defaults to the host name, so using the host names will work as well:

[source,yaml]
--------------------------------------------------
cluster.initial_master_nodes:
  - master-a
  - master-b
  - master-c
--------------------------------------------------

TODO provide another example with ip addresses (+ possibly port)

While it is sufficient to set this on a single master-eligible node
in the cluster, and only mention a single maser-eligible node, using
multiple nodes for bootstrapping allows the bootstrap process to go
through even if not all nodes are avilable. In any case, when
specifying the list of initial master nodes, **it is vitally important**
to configure each node with exactly the same list of nodes, to prevent
two independent clusters from forming. Typically you will set this
on the nodes that are mentioned in the list of initial master nodes.

WARNING: You must put exactly the same set of initial master nodes in each
 configuration file in order to be sure that only a single cluster forms during
 bootstrapping and therefore to avoid the risk of data loss.


It is also possible to set the initial set of master nodes on the
command-line used to start Elasticsearch:

[source,bash]
--------------------------------------------------
$ bin/elasticsearch -Ecluster.initial_master_nodes=master-a,master-b,master-c
--------------------------------------------------

Just as with the config file, this additional command-line parameter
can be removed once a cluster has successfully formed.

[float]
==== Choosing a cluster name
The `cluster.name` allows to create separated clusters from one another.
The default value for the cluster name is `elasticsearch`, though it is
recommended to change this to reflect the logical group name of the
cluster running.


==== Auto-bootstrapping in development mode

If the cluster is running with a completely default configuration then it will
automatically bootstrap based on the nodes that could be discovered within a
short time after startup. Since nodes may not always reliably discover each
other quickly enough this automatic bootstrapping is not always reliable and
cannot be used in production deployments.
