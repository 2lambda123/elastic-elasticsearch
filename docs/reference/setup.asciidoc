[[setup]]
= Setup

[partintro]
--
This section includes information on how to setup *elasticsearch* and
get it running. If you haven't already, http://www.elasticsearch.org/download[download] it, and
then check the <<setup-installation,installation>> docs.

NOTE: Elasticsearch can also be installed from our repositories using `apt` or `yum`.
See <<setup-repositories>>.

[[setup-installation]]
[float]
== Installation

After link:/download[downloading] the latest release and extracting it,
*elasticsearch* can be started using:

[source,sh]
--------------------------------------------------
$ bin/elasticsearch
--------------------------------------------------

Under *nix system, the command will start the process in the foreground.
To run it in the background, add the `-d` switch to it:

[source,sh]
--------------------------------------------------
$ bin/elasticsearch -d
--------------------------------------------------

Elasticsearch is built using Java, and requires at least
http://java.sun.com/javase/downloads/index.jsp[Java 6] in order to run.
The version of Java that will be used can be set by setting the
`JAVA_HOME` environment variable.

.*NIX
*************************************************************************
There are added features when using the `elasticsearch` shell script.
The first, which was explained earlier, is the ability to easily run the
process either in the foreground or the background.

Another feature is the ability to pass `-X` and `-D` or getopt long style
configuration parameters directly to the script. When set, all override
anything set using either `JAVA_OPTS` or `ES_JAVA_OPTS`. For example:

[source,sh]
--------------------------------------------------
$ bin/elasticsearch -Xmx2g -Xms2g -Des.index.store.type=memory --node.name=my-node
--------------------------------------------------
*************************************************************************

== Upgrading from earlier versions

If you are upgrading from a previous version of Elasticsearch (from 0.90.x or earlier to 1.x), you must perform a full cluster restart (i.e. not a rolling restart). To perform this:

* Install the new version of Elasticsearch on all nodes. DO NOT RESTART YET!

* Disable shard allocation (optional).
--------------------------------------------------
curl -XPUT localhost:9200/_cluster/settings -d '{
  "persistent" : {
    "cluster.routing.allocation.disable_allocation" : true
  }
}'
--------------------------------------------------

* Stop Elasticsearch running on ALL nodes.

* Restart any master-eligible nodes, one at a time. Verify successful election of new master after a quorum has come online.

* Restart data/client nodes, one at a time. Verify each node has successfully joined the cluster.

* Re-enable allocation (optional)
--------------------------------------------------
curl -XPUT localhost:9200/_cluster/settings -d '{
    "persistent" : {
        "cluster.routing.allocation.enable" : "all"
    }
}'
--------------------------------------------------

--

include::setup/configuration.asciidoc[]

include::setup/as-a-service.asciidoc[]

include::setup/as-a-service-win.asciidoc[]

include::setup/dir-layout.asciidoc[]

include::setup/repositories.asciidoc[]
