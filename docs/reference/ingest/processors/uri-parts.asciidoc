[role="xpack"]
[testenv="basic"]
[[uri-parts-processor]]
=== URI parts processor
++++
<titleabbrev>URI Parts</titleabbrev>
++++

The URI parts processor parses a text field containing a Uniform Resource
Identifier (URI) and writes its components to the specified field.
Components that may be extracted from the URI include domain, path, fragment,
port, query, scheme, user info, username, and password.

[[uri-parts-options]]
.URI Parts Options
[options="header"]
|======
| Name               | Required  | Default | Description
| `field`            | yes       | -       | The field in the input document
containing text that may be parsed as a URI.
| `target_field`     | no        | `url`   | Field under which the components
of the parsed URI should be written.
| `keep_original`    | no        | true    | If true, the unparsed contents of
`field` will be copied to `<target_field>.original`.
| `remove_if_successful` | no    | false   | If `true` and the processor
successfully parses the contents of `field` as a URI, then `field` will be
removed from the document.

include::common-options.asciidoc[]
|======

Here is an example definition of the URI parts processor:

[source,js]
--------------------------------------------------
{
  "description" : "...",
  "processors" : [
    {
      "uri_parts": {
        "field": "input_field",
        "target_field": "url",
        "keep_original": true,
        "remove_if_successful": false
      }
    }
  ]
}
--------------------------------------------------
// NOTCONSOLE

When the above processor executes on the following document:

[source,js]
--------------------------------------------------
{
  "_source": {
    "input_field": "http://myusername:mypassword@www.example.com:80/foo.gif?key1=val1&key2=val2#fragment"
  }
}
--------------------------------------------------
// NOTCONSOLE

It produces this result:

[source,js]
--------------------------------------------------
"_source" : {
  "input_field" : "http://myusername:mypassword@www.example.com:80/foo.gif?key1=val1&key2=val2#fragment",
  "url" : {
    "path" : "/foo.gif",
    "fragment" : "fragment",
    "extension" : "gif",
    "password" : "mypassword",
    "original" : "http://myusername:mypassword@www.example.com:80/foo.gif?key1=val1&key2=val2#fragment",
    "scheme" : "http",
    "port" : 80,
    "user_info" : "myusername:mypassword",
    "domain" : "www.example.com",
    "query" : "key1=val1&key2=val2",
    "username" : "myusername"
  }
}
--------------------------------------------------
// NOTCONSOLE
