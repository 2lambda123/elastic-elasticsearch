[role="xpack"]
[testenv="basic"]
[[inference-processor]]
=== {infer-cap} Processor

Uses a pre-trained {dfanalytics} model to infer against the data that is being 
ingested in the pipeline.


[[inference-options]]
.{infer-cap} Options
[options="header"]
|======
| Name               | Required  | Default                        | Description
| `model_id   `      | yes       | -                              | (String) The ID of the model to load and infer against.
| `target_field`     | yes       | `ml.inference.<processor_tag>` | (String) The field name to which to write the results objects.
| `field_mappings`   | no        | -                              | (Object) Maps the document field names to the known field names of the model.
| `inference_config` | yes       | -                              | (Object) Contains the inference type and its options. There are two types: `regression` and `classification`.
include::common-options.asciidoc[]
|======


[source,js]
--------------------------------------------------
{
  	"inference": {
      	"model_id": "flight_delay_regression-1571767128603",
      	"target_field": "FlightDelayMin_prediction_infer",
      	"field_mappings": {},
      	"inference_config": {"regression": {}},
      	"model_info_field": "ml"
    }
}
--------------------------------------------------
// NOTCONSOLE


[discrete]
[[inference-processor-config-example]]
==== `inference_config` examples

[source,js]
--------------------------------------------------
{
  "inference_config": {
    “regression”: {
    “results_field”: “my_regression”
    }
  },
}
--------------------------------------------------
// NOTCONSOLE

This configuration specifies a `regression` inference and the results are 
written to the `my_regression` field contained in the `target_field` results 
object.


[source,js]
--------------------------------------------------
{
  "inference_config": {
    “classification”: {
      “num_top_classes”: 2, 
      “results_field”: “prediction”, 
      “top_classes_results_field”: “probabilities”
      }
    }
}
--------------------------------------------------
// NOTCONSOLE

This configuration specifies a `classification` inference. The number of 
categories for which the predicted probabilities are reported is 2 
(`num_top_classes`). The result is written to the `prediction` field and the top 
classes to the `probabilities` field. Both fields are contained in the 
`target_field` results object.