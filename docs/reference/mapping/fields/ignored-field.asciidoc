[[mapping-ignored-field]]
=== `_ignored` field

added[6.4.0]

The `_ignored` field indexes and stores the names of every field in a document
that has been ignored because it was malformed and
<<ignore-malformed,`ignore_malformed`>> was turned on.

This field is searchable with <<query-dsl-term-query,`term`>>,
<<query-dsl-terms-query,`terms`>> and <<query-dsl-exists-query,`exists`>>
queries, and is returned as part of the search hits.

For instance the below query matches all documents that have one or more fields
that got ignored:

[source,console]
--------------------------------------------------
GET _search
{
  "query": {
    "exists": {
      "field": "_ignored"
    }
  }
}
--------------------------------------------------

Similarly, the below query finds all documents whose `@timestamp` field was
ignored at index time:

[source,console]
--------------------------------------------------
GET _search
{
  "query": {
    "term": {
      "_ignored": "@timestamp"
    }
  }
}
--------------------------------------------------

==== Doc values

By default doc_values is disabled for the _ignored field.
It's possible to enable doc_values for the field in order to perform aggregation and
use stored fields.

To enable doc_values, add the property to the mappings
[source,console]
--------------------------------------------------
POST my_index
{
  "mappings": {
    "_ignored": {
      "doc_values": true
    }
  }
}
--------------------------------------------------

Then the field can be used in aggregations
[source,console]
--------------------------------------------------
GET my_index/_search
{
  "aggs": {
    "ignored_fields": {
      "terms": {
         "field": "_ignored"
      }
    }
  }
}
--------------------------------------------------

