pr: 59507
issues:
  - 59391
area: Infra/Scripting
type: breaking
summary: Consolidate script parsing from object
versions:
  - v8.0.0
breaking:
  notable: false
  title: Consolidate script parsing from object
  anchor: consolidate_script_parsing_from_object
  body: >-
    The update by query action parses a script from an object (map or string).
    We will need to do the same for runtime fields as they are parsed as part of
    mappings (#59391).

    This commit moves the existing parsing of a script from an object from RestUpdateByQueryAction to the Script class. It also adds tests and adjusts some error messages that are incorrect. Also, options were not parsed before and they are now. And unsupported fields are no longer silently ignored.

    I plan on backporting this change to 7.x without the handling for unsupported fields, as that is a breaking change.
