pr: 41011
issues:
  - 39841
area: Search
type: breaking
summary: Parse empty first line in msearch request body as action metadata
versions:
  - v8.0.0
breaking:
  notable: false
  title: Parse empty first line in msearch request body as action metadata
  anchor: parse_empty_first_line_in_msearch_request_body_as_action_metadata
  body: >-
    It looks like when parsing the msearch request body, we allow for the first
    line to be empty, yet that causes some different treatment for the first
    line that ends up requiring the action metadata line, while all other lines
    don't as they can be just empty.

    With this change we properly accept the following which we would otherwise reject due to the first line being empty:


    { "query": {"match_all": {}}}


    { "query": {"match_all": {}}}


    but we stop accepting the following (note the empty line before the first action metadata line:


    {}

    { "query": {"match_all": {}}}


    { "query": {"match_all": {}}}


    Relates to #39841
