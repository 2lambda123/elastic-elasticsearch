---
"line_677":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_security/role_mapping/saml-example"
        body: |
          {
            "roles": [ "example_role" ],
            "enabled": true,
            "rules": {
              "field": { "realm.name": "saml1" }
            }
          }
  - is_false: _shards.failures
---
"line_716":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_security/role_mapping/saml-finance"
        body: |
          {
            "roles": [ "finance_data" ],
            "enabled": true,
            "rules": { "all": [
                  { "field": { "realm.name": "saml1" } },
                  { "field": { "groups": "finance-team" } }
            ] }
          }
  - is_false: _shards.failures
---
"line_936":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: POST
        path: "_security/role/saml-service-role"
        body: |
          {
            "cluster" : ["manage_saml", "manage_token"]
          }
  - is_false: _shards.failures
---
"line_944":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: POST
        path: "_security/user/saml-service-user"
        body: |
          {
            "password" : "<somePasswordHere>",
            "roles"    : ["saml-service-role"]
          }
  - is_false: _shards.failures
---
"line_964":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: POST
        path: "_security/saml/prepare"
        body: |
          {
            "realm" : "saml1"
          }
  - is_false: _shards.failures
---
"line_987":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: handled in IT
  - do:
      raw:
        method: POST
        path: "_security/saml/authenticate"
        body: |
          {
            "content" : "PHNhbWxwOlJlc3BvbnNlIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIHhtbG5zOnNhbWw9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMD.....",
            "ids" : ["4fee3b046395c4e751011e97f8900b5273d56685"]
          }
  - is_false: _shards.failures
---
"line_1016":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: handled in IT
  - do:
      raw:
        method: POST
        path: "_security/saml/authenticate"
        body: |
          {
            "content" : "PHNhbWxwOlJlc3BvbnNlIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIHhtbG5zOnNhbWw9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMD.....",
            "ids" : []
          }
  - is_false: _shards.failures
---
"line_1031":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: handled in IT
  - do:
      raw:
        method: POST
        path: "_security/saml/logout"
        body: |
          {
            "token" : "46ToAxZVaXVVZTVKOVF5YU04ZFJVUDVSZlV3",
            "refresh_token": "mJdXLtmvTUSpoLwMvdBt_w"
          }
  - is_false: _shards.failures
---
"line_1049":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: handled in IT
  - do:
      raw:
        method: POST
        path: "_security/saml/invalidate"
        body: |
          {
            "query" : "SAMLRequest=nZFda4MwFIb%2FiuS%2BmviRpqFaClKQdbvo2g12M2KMraCJ9cRR9utnW4Wyi13sMie873MeznJ1aWrnS3VQGR0j4mLkKC1NUeljjA77zYyhVbIE0dR%2By7fmaHq7U%2BdegXWGpAZ%2B%2F4pR32luBFTAtWgUcCv56%2Fp5y30X87Yz1khTIycdgpUW9kY7WdsC9zxoXTvMvWuVV98YyMnSGH2SYE5pwALBIr9QKiwDGpW0oGVUznGeMyJZKFkQ4jBf5HnhUymjIhzCAL3KNFihbYx8TBYzzGaY7EnIyZwHzCWMfiDnbRIftkSjJr%2BFu0e9v%2B0EgOquRiiZjKpiVFp6j50T4WXoyNJ%2FEWC9fdqc1t%2F1%2B2F3aUpjzhPiXpqMz1%2FHSn4A&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256&Signature=MsAYz2NFdovMG2mXf6TSpu5vlQQyEJAg%2B4KCwBqJTmrb3yGXKUtIgvjqf88eCAK32v3eN8vupjPC8LglYmke1ZnjK0%2FKxzkvSjTVA7mMQe2AQdKbkyC038zzRq%2FYHcjFDE%2Bz0qISwSHZY2NyLePmwU7SexEXnIz37jKC6NMEhus%3D",
            "realm" : "saml1"
          }
  - is_false: _shards.failures
