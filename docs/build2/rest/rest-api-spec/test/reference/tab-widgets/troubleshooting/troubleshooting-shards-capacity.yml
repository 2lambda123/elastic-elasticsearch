---
"line_27":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_68":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node": 1200
            }
          }
  - is_false: _shards.failures
---
"line_87":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_119":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node": null
            }
          }
  - is_false: _shards.failures
---
"line_135":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_174":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node": 1200
            }
          }
  - is_false: _shards.failures
---
"line_191":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_223":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node": null
            }
          }
  - is_false: _shards.failures
---
"line_257":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_297":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node.frozen": 3200
            }
          }
  - is_false: _shards.failures
---
"line_316":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_348":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node.frozen": null
            }
          }
  - is_false: _shards.failures
---
"line_364":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_401":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node.frozen": 3200
            }
          }
  - is_false: _shards.failures
---
"line_418":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_health_report/shards_capacity"
  - is_false: _shards.failures
---
"line_450":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "_cluster/settings"
        body: |
          {
            "persistent" : {
              "cluster.max_shards_per_node.frozen": null
            }
          }
  - is_false: _shards.failures
