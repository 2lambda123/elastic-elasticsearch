---
"line_30":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time"
                }
              }
            }
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "took": $body.took,"timed_out": false,"_shards": $body._shards,"hits": $body.hits,
        
         "aggregations": {
            "load_time_outlier": {
              "values": {
                "1.0": 9.9,
                "5.0": 29.5,
                "25.0": 167.5,
                "50.0": 445.0,
                "75.0": 722.5,
                "95.0": 940.5,
                "99.0": 980.1
              }
            }
          }
        }
---
"line_88":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time",
                  "percents": [ 95, 99, 99.9 ]
                }
              }
            }
          }
  - is_false: _shards.failures
---
"line_110":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time",
                  "keyed": false
                }
              }
            }
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "took": $body.took,"timed_out": false,"_shards": $body._shards,"hits": $body.hits,
        
          "aggregations": {
            "load_time_outlier": {
              "values": [
                {
                  "key": 1.0,
                  "value": 9.9
                },
                {
                  "key": 5.0,
                  "value": 29.5
                },
                {
                  "key": 25.0,
                  "value": 167.5
                },
                {
                  "key": 50.0,
                  "value": 445.0
                },
                {
                  "key": 75.0,
                  "value": 722.5
                },
                {
                  "key": 95.0,
                  "value": 940.5
                },
                {
                  "key": 99.0,
                  "value": 980.1
                }
              ]
            }
          }
        }
---
"line_185":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        filter_path: "aggregations"
        body: |
          {
            "size": 0,
            "runtime_mappings": {
              "load_time.seconds": {
                "type": "long",
                "script": {
                  "source": "emit(doc['load_time'].value / params.timeUnit)",
                  "params": {
                    "timeUnit": 10
                  }
                }
              }
            },
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time.seconds"
                }
              }
            }
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
         "aggregations": {
            "load_time_outlier": {
              "values": {
                "1.0": 0.99,
                "5.0": 2.95,
                "25.0": 16.75,
                "50.0": 44.5,
                "75.0": 72.25,
                "95.0": 94.05,
                "99.0": 98.01
              }
            }
          }
        }
---
"line_288":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time",
                  "tdigest": {
                    "compression": 200
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
---
"line_335":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time",
                  "tdigest": {
                    "execution_hint": "high_accuracy"
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
---
"line_370":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "load_time_outlier": {
                "percentiles": {
                  "field": "load_time",
                  "percents": [ 95, 99, 99.9 ],
                  "hdr": {
                    "number_of_significant_value_digits": 3
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
---
"line_402":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
# Named setup latency

  - do:
        indices.create:
          index: latency
          body:
            settings:
              number_of_shards: 1
              number_of_replicas: 1
            mappings:
              properties:
                load_time:
                  type: long
  - do:
        bulk:
          index: latency
          refresh: true
          body: |
            {"index":{}}
            {"load_time": "0"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "10"}
            {"index":{}}
            {"load_time": "110"}
            {"index":{}}
            {"load_time": "120"}
            {"index":{}}
            {"load_time": "130"}
            {"index":{}}
            {"load_time": "140"}
            {"index":{}}
            {"load_time": "150"}
            {"index":{}}
            {"load_time": "160"}
            {"index":{}}
            {"load_time": "170"}
            {"index":{}}
            {"load_time": "180"}
            {"index":{}}
            {"load_time": "190"}
            {"index":{}}
            {"load_time": "20"}
            {"index":{}}
            {"load_time": "210"}
            {"index":{}}
            {"load_time": "220"}
            {"index":{}}
            {"load_time": "230"}
            {"index":{}}
            {"load_time": "240"}
            {"index":{}}
            {"load_time": "250"}
            {"index":{}}
            {"load_time": "260"}
            {"index":{}}
            {"load_time": "270"}
            {"index":{}}
            {"load_time": "280"}
            {"index":{}}
            {"load_time": "290"}
            {"index":{}}
            {"load_time": "30"}
            {"index":{}}
            {"load_time": "310"}
            {"index":{}}
            {"load_time": "320"}
            {"index":{}}
            {"load_time": "330"}
            {"index":{}}
            {"load_time": "340"}
            {"index":{}}
            {"load_time": "350"}
            {"index":{}}
            {"load_time": "360"}
            {"index":{}}
            {"load_time": "370"}
            {"index":{}}
            {"load_time": "380"}
            {"index":{}}
            {"load_time": "390"}
            {"index":{}}
            {"load_time": "40"}
            {"index":{}}
            {"load_time": "410"}
            {"index":{}}
            {"load_time": "420"}
            {"index":{}}
            {"load_time": "430"}
            {"index":{}}
            {"load_time": "440"}
            {"index":{}}
            {"load_time": "450"}
            {"index":{}}
            {"load_time": "460"}
            {"index":{}}
            {"load_time": "470"}
            {"index":{}}
            {"load_time": "480"}
            {"index":{}}
            {"load_time": "490"}
            {"index":{}}
            {"load_time": "50"}
            {"index":{}}
            {"load_time": "510"}
            {"index":{}}
            {"load_time": "520"}
            {"index":{}}
            {"load_time": "530"}
            {"index":{}}
            {"load_time": "540"}
            {"index":{}}
            {"load_time": "550"}
            {"index":{}}
            {"load_time": "560"}
            {"index":{}}
            {"load_time": "570"}
            {"index":{}}
            {"load_time": "580"}
            {"index":{}}
            {"load_time": "590"}
            {"index":{}}
            {"load_time": "60"}
            {"index":{}}
            {"load_time": "610"}
            {"index":{}}
            {"load_time": "620"}
            {"index":{}}
            {"load_time": "630"}
            {"index":{}}
            {"load_time": "640"}
            {"index":{}}
            {"load_time": "650"}
            {"index":{}}
            {"load_time": "660"}
            {"index":{}}
            {"load_time": "670"}
            {"index":{}}
            {"load_time": "680"}
            {"index":{}}
            {"load_time": "690"}
            {"index":{}}
            {"load_time": "70"}
            {"index":{}}
            {"load_time": "710"}
            {"index":{}}
            {"load_time": "720"}
            {"index":{}}
            {"load_time": "730"}
            {"index":{}}
            {"load_time": "740"}
            {"index":{}}
            {"load_time": "750"}
            {"index":{}}
            {"load_time": "760"}
            {"index":{}}
            {"load_time": "770"}
            {"index":{}}
            {"load_time": "780"}
            {"index":{}}
            {"load_time": "790"}
            {"index":{}}
            {"load_time": "80"}
            {"index":{}}
            {"load_time": "810"}
            {"index":{}}
            {"load_time": "820"}
            {"index":{}}
            {"load_time": "830"}
            {"index":{}}
            {"load_time": "840"}
            {"index":{}}
            {"load_time": "850"}
            {"index":{}}
            {"load_time": "860"}
            {"index":{}}
            {"load_time": "870"}
            {"index":{}}
            {"load_time": "880"}
            {"index":{}}
            {"load_time": "890"}
            {"index":{}}
            {"load_time": "90"}
            {"index":{}}
            {"load_time": "910"}
            {"index":{}}
            {"load_time": "920"}
            {"index":{}}
            {"load_time": "930"}
            {"index":{}}
            {"load_time": "940"}
            {"index":{}}
            {"load_time": "950"}
            {"index":{}}
            {"load_time": "960"}
            {"index":{}}
            {"load_time": "970"}
            {"index":{}}
            {"load_time": "980"}
            {"index":{}}
            {"load_time": "990"}
  - do:
      raw:
        method: GET
        path: "latency/_search"
        body: |
          {
            "size": 0,
            "aggs": {
              "grade_percentiles": {
                "percentiles": {
                  "field": "grade",
                  "missing": 10
                }
              }
            }
          }
  - is_false: _shards.failures
