---
"line_39":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: POST
        path: "_ingest/pipeline/_simulate"
        body: |
          {
            "pipeline": {
              "description" : "...",
              "processors": [
                {
                  "grok": {
                    "field": "message",
                    "patterns": ["%{IP:client} %{WORD:method} %{URIPATHPARAM:request} %{NUMBER:bytes:int} %{NUMBER:duration:double}"]
                  }
                }
              ]
            },
            "docs":[
              {
                "_source": {
                  "message": "55.3.244.1 GET /index.html 15824 0.043"
                }
              }
            ]
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "docs": [
            {
              "doc": {
                "_index": "_index",
                "_id": "_id",
                "_version": "-3",
                "_source" : {
                  "duration" : 0.043,
                  "request" : "/index.html",
                  "method" : "GET",
                  "bytes" : 15824,
                  "client" : "55.3.244.1",
                  "message" : "55.3.244.1 GET /index.html 15824 0.043"
                },
                "_ingest": {
                  "timestamp": "$body.docs.0.doc._ingest.timestamp"
                }
              }
            }
          ]
        }
---
"line_132":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: POST
        path: "_ingest/pipeline/_simulate"
        body: |
          {
            "pipeline": {
            "description" : "parse multiple patterns",
            "processors": [
              {
                "grok": {
                  "field": "message",
                  "patterns": ["%{FAVORITE_DOG:pet}", "%{FAVORITE_CAT:pet}"],
                  "pattern_definitions" : {
                    "FAVORITE_DOG" : "beagle",
                    "FAVORITE_CAT" : "burmese"
                  }
                }
              }
            ]
          },
          "docs":[
            {
              "_source": {
                "message": "I love burmese cats!"
              }
            }
            ]
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "docs": [
            {
              "doc": {
                "_index": "_index",
                "_id": "_id",
                "_version": "-3",
                "_source": {
                  "message": "I love burmese cats!",
                  "pet": "burmese"
                },
                "_ingest": {
                  "timestamp": "$body.docs.0.doc._ingest.timestamp"
                }
              }
            }
          ]
        }
---
"line_192":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: POST
        path: "_ingest/pipeline/_simulate"
        body: |
          {
            "pipeline": {
            "description" : "parse multiple patterns",
            "processors": [
              {
                "grok": {
                  "field": "message",
                  "patterns": ["%{FAVORITE_DOG:pet}", "%{FAVORITE_CAT:pet}"],
                  "trace_match": true,
                  "pattern_definitions" : {
                    "FAVORITE_DOG" : "beagle",
                    "FAVORITE_CAT" : "burmese"
                  }
                }
              }
            ]
          },
          "docs":[
            {
              "_source": {
                "message": "I love burmese cats!"
              }
            }
            ]
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "docs": [
            {
              "doc": {
                "_index": "_index",
                "_id": "_id",
                "_version": "-3",
                "_source": {
                  "message": "I love burmese cats!",
                  "pet": "burmese"
                },
                "_ingest": {
                  "_grok_match_index": "1",
                  "timestamp": "$body.docs.0.doc._ingest.timestamp"
                }
              }
            }
          ]
        }
---
"line_258":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_ingest/processor/grok"
  - is_false: _shards.failures
---
"line_281":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_ingest/processor/grok"
        ecs_compatibility: "v1"
  - is_false: _shards.failures
---
"line_293":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: GET
        path: "_ingest/processor/grok"
        s: ""
  - is_false: _shards.failures
