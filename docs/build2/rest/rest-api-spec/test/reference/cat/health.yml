---
"cat-health-example":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "my-index-000001"
        body: |
          {"settings":{"number_of_replicas": 0}}
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "_cat/health"
        v: "true"
  - match:
      $body:
        /epoch      \s+timestamp \s+cluster       \s+status \s+node.total \s+node.data \s+shards \s+pri \s+relo \s+init \s+unassign \s+pending_tasks \s+max_task_wait_time \s+active_shards_percent\s*
         \d+ \s+\d+:\d+:\d+  \s+[^ \s+]+ \s+green           \s+1         \s+1      \s+1   \s+1    \s+0    \s+0        \s+0             \s+\d+ \s+(-|\d+(\.\d+)?[ms]+)                \s+100.0%\s*/
---
"cat-health-no-timestamp-example":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "my-index-000001"
        body: |
          {"settings":{"number_of_replicas": 0}}
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "_cat/health"
        v: "true"
        ts: "false"
  - match:
      $body:
        /cluster       \s+status \s+node.total \s+node.data \s+shards \s+pri \s+relo \s+init \s+unassign \s+pending_tasks \s+max_task_wait_time \s+active_shards_percent\s*
         [^ \s+]+ \s+green           \s+1         \s+1      \s+1   \s+1    \s+0    \s+0        \s+0             \s+\d+ \s+(-|\d+(\.\d+)?[ms]+)                \s+100.0%\s*/
