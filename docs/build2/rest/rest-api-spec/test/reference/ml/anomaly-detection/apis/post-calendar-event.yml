---
"line_63":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: setup:calendar_outages_addjob
  - do:
      raw:
        method: POST
        path: "_ml/calendars/planned-outages/events"
        body: |
          {
            "events" : [
              {"description": "event 1", "start_time": 1513641600000, "end_time": 1513728000000},
              {"description": "event 2", "start_time": 1513814400000, "end_time": 1513900800000},
              {"description": "event 3", "start_time": 1514160000000, "end_time": 1514246400000}
            ]
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "events": [
            {
              "description": "event 1",
              "start_time": 1513641600000,
              "end_time": 1513728000000,
              "calendar_id": "planned-outages"
            },
            {
              "description": "event 2",
              "start_time": 1513814400000,
              "end_time": 1513900800000,
              "calendar_id": "planned-outages"
            },
            {
              "description": "event 3",
              "start_time": 1514160000000,
              "end_time": 1514246400000,
              "calendar_id": "planned-outages"
            }
          ]
        }
