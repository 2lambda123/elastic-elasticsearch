---
"line_69":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: TBD
  - do:
      raw:
        method: POST
        path: "_ml/trained_models/model2/deployment/_infer"
        body: |
          {
          	"docs": [{"text_field": "The movie was awesome!!"}]
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "predicted_value" : "POSITIVE",
          "prediction_probability" : 0.9998667964092964
        }
---
"line_92":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: TBD
  - do:
      raw:
        method: POST
        path: "_ml/trained_models/model2/deployment/_infer"
        body: |
          {
          	"docs": [{"text_field": "Hi my name is Josh and I live in Berlin"}]
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "predicted_value" : "Hi my name is [Josh](PER&Josh) and I live in [Berlin](LOC&Berlin)",
          "entities" : [
            {
              "entity" : "Josh",
              "class_name" : "PER",
              "class_probability" : 0.9977303419824,
              "start_pos" : 14,
              "end_pos" : 18
            },
            {
              "entity" : "Berlin",
              "class_name" : "LOC",
              "class_probability" : 0.9992474323902818,
              "start_pos" : 33,
              "end_pos" : 39
            }
          ]
        }
---
"line_130":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: TBD
  - do:
      raw:
        method: POST
        path: "_ml/trained_models/model2/deployment/_infer"
        body: |
          {
            "docs": [
              {
                "text_field": "This is a very happy person"
              }
            ],
            "inference_config": {
              "zero_shot_classification": {
                "labels": [
                  "glad",
                  "sad",
                  "bad",
                  "rad"
                ],
                "multi_label": false
              }
            }
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "predicted_value" : "glad",
          "top_classes" : [
            {
              "class_name" : "glad",
              "class_probability" : 0.8061155063386439,
              "class_score" : 0.8061155063386439
            },
            {
              "class_name" : "rad",
              "class_probability" : 0.18218006158387956,
              "class_score" : 0.18218006158387956
            },
            {
              "class_name" : "bad",
              "class_probability" : 0.006325615787634201,
              "class_score" : 0.006325615787634201
            },
            {
              "class_name" : "sad",
              "class_probability" : 0.0053788162898424545,
              "class_score" : 0.0053788162898424545
            }
          ],
          "prediction_probability" : 0.8061155063386439
        }
---
"line_191":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
        - always_skip
      reason: TBD
  - do:
      raw:
        method: POST
        path: "_ml/trained_models/model2/deployment/_infer"
        body: |
          {
            "docs": [{"text_field": "The Amazon rainforest covers most of the Amazon basin in South America"}],
            "inference_config": {
              "ner": {
                "tokenization": {
                  "bert": {
                    "truncate": "first"
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "predicted_value" : "The [Amazon](LOC&Amazon) rainforest covers most of the [Amazon](LOC&Amazon) basin in [South America](LOC&South+America)",
          "entities" : [
            {
              "entity" : "Amazon",
              "class_name" : "LOC",
              "class_probability" : 0.9505460915724254,
              "start_pos" : 4,
              "end_pos" : 10
            },
            {
              "entity" : "Amazon",
              "class_name" : "LOC",
              "class_probability" : 0.9969992804311777,
              "start_pos" : 41,
              "end_pos" : 47
            }
          ],
          "is_truncated" : true
        }
