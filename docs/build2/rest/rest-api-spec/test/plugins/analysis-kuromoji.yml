---
"line_49":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "index-00001"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "kuromoji_normalize": {
                      "char_filter": [
                        "icu_normalizer"
                      ],
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [
                        "kuromoji_baseform",
                        "kuromoji_part_of_speech",
                        "cjk_width",
                        "ja_stop",
                        "kuromoji_stemmer",
                        "lowercase"
                      ]
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
---
"line_162":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "tokenizer": {
                    "kuromoji_user_dict": {
                      "type": "kuromoji_tokenizer",
                      "mode": "extended",
                      "user_dictionary_rules": ["東京スカイツリー,東京 スカイツリー,トウキョウ スカイツリー,カスタム名詞"]
                    }
                  },
                  "analyzer": {
                    "my_analyzer": {
                      "type": "custom",
                      "tokenizer": "kuromoji_user_dict"
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
---
"line_213":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "tokenizer": {
                    "kuromoji_user_dict": {
                      "type": "kuromoji_tokenizer",
                      "mode": "extended",
                      "discard_punctuation": "false",
                      "user_dictionary": "userdict_ja.txt"
                    }
                  },
                  "analyzer": {
                    "my_analyzer": {
                      "type": "custom",
                      "tokenizer": "kuromoji_user_dict"
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "my_analyzer",
            "text": "東京スカイツリー"
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "tokens" : [ {
            "token" : "東京",
            "start_offset" : 0,
            "end_offset" : 2,
            "type" : "word",
            "position" : 0
          }, {
            "token" : "スカイツリー",
            "start_offset" : 2,
            "end_offset" : 8,
            "type" : "word",
            "position" : 1
          } ]
        }
---
"line_285":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "my_analyzer": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [
                        "kuromoji_baseform"
                      ]
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "my_analyzer",
            "text": "飲み"
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "tokens" : [ {
            "token" : "飲む",
            "start_offset" : 0,
            "end_offset" : 2,
            "type" : "word",
            "position" : 0
          } ]
        }
---
"line_341":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "my_analyzer": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [
                        "my_posfilter"
                      ]
                    }
                  },
                  "filter": {
                    "my_posfilter": {
                      "type": "kuromoji_part_of_speech",
                      "stoptags": [
                        "助詞-格助詞-一般",
                        "助詞-終助詞"
                      ]
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "my_analyzer",
            "text": "寿司がおいしいね"
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "tokens" : [ {
            "token" : "寿司",
            "start_offset" : 0,
            "end_offset" : 2,
            "type" : "word",
            "position" : 0
          }, {
            "token" : "おいしい",
            "start_offset" : 3,
            "end_offset" : 7,
            "type" : "word",
            "position" : 2
          } ]
        }
---
"line_414":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "romaji_analyzer": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [ "romaji_readingform" ]
                    },
                    "katakana_analyzer": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [ "katakana_readingform" ]
                    }
                  },
                  "filter": {
                    "romaji_readingform": {
                      "type": "kuromoji_readingform",
                      "use_romaji": true
                    },
                    "katakana_readingform": {
                      "type": "kuromoji_readingform",
                      "use_romaji": false
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "katakana_analyzer",
            "text": "寿司"
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "romaji_analyzer",
            "text": "寿司"
          }
  - is_false: _shards.failures
---
"line_477":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "my_analyzer": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [
                        "my_katakana_stemmer"
                      ]
                    }
                  },
                  "filter": {
                    "my_katakana_stemmer": {
                      "type": "kuromoji_stemmer",
                      "minimum_length": 4
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "my_analyzer",
            "text": "コピー"
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "my_analyzer",
            "text": "サーバー"
          }
  - is_false: _shards.failures
---
"line_529":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "analyzer_with_ja_stop": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [
                        "ja_stop"
                      ]
                    }
                  },
                  "filter": {
                    "ja_stop": {
                      "type": "ja_stop",
                      "stopwords": [
                        "_japanese_",
                        "ストップ"
                      ]
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "analyzer_with_ja_stop",
            "text": "ストップは消える"
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "tokens" : [ {
            "token" : "消える",
            "start_offset" : 5,
            "end_offset" : 8,
            "type" : "word",
            "position" : 2
          } ]
        }
---
"line_587":
  - skip:
      features:
        - default_shards
        - stash_in_key
        - stash_in_path
        - stash_path_replace
        - warnings
  - do:
      raw:
        method: PUT
        path: "kuromoji_sample"
        body: |
          {
            "settings": {
              "index": {
                "analysis": {
                  "analyzer": {
                    "my_analyzer": {
                      "tokenizer": "kuromoji_tokenizer",
                      "filter": [
                        "kuromoji_number"
                      ]
                    }
                  }
                }
              }
            }
          }
  - is_false: _shards.failures
  - do:
      raw:
        method: GET
        path: "kuromoji_sample/_analyze"
        body: |
          {
            "analyzer": "my_analyzer",
            "text": "一〇〇〇"
          }
  - is_false: _shards.failures
  - match:
      $body:
        {
          "tokens" : [ {
            "token" : "1000",
            "start_offset" : 0,
            "end_offset" : 4,
            "type" : "word",
            "position" : 0
          } ]
        }
