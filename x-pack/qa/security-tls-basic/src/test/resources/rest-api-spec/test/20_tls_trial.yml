setup:
  - skip:
      features: headers

  - do:
      license.post_start_trial:
        acknowledge: true

---
teardown:
  - do:
      license.post_start_basic:
        acknowledge: true

---
"Check setup":
  - do:
      license.get: {}
  - match: { license.type: "trial" }

  - do:
      xpack.usage: {}
  - match: { security.ssl.http.enabled: true }
  - match: { security.ssl.transport.enabled: true }

  - do:
      ssl.certificates: {}
  - match: { 0.format: "PEM" }
  - match: { 1.format: "PEM" }
  - match: { 2.format: "PEM" }
  - length: { $body: 3 }
