---
"Test Lifecycle Still There And Indices Are Still Managed":
  - do:
      acknowledged: true
      ilm.get_lifecycle:
        policy: "my_lifecycle"
  - match: { my_lifecycle.policy.phases.warm.minimum_age: "1000d" }

  - do:
      acknowledged: true
      ilm.explain_lifecycle:
        index: "my_index"
  - is_true: indices.my_index.managed
  - match: { indices.my_index.index: "my_index" }
  - match: { indices.my_index.policy: "my_lifecycle" }

  - do:
    acknowledged: true
    indices.delete:
    index: my_index

  - do:
      acknowledged: true
      ilm.delete_lifecycle:
        policy: "my_lifecycle"
