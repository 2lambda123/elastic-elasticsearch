---
"Test Lifecycle Still There And Indices Are Still Managed":
  - do:
      acknowledge: true
      ilm.get_lifecycle:
        policy: "my_lifecycle"
  - match: { my_timeseries_lifecycle.phases.warm.minimum_age: "1000d" }

    - do:
        acknowledge: true
        ilm.explain_lifecycle:
          index: "my_index"

    - is_true: indices.my_index.managed
    - match: { indices.my_index.index: "my_index" }
    - match: { indices.my_index.policy: "my_lifecycle" }

  - do:
    acknowledge: true
    indices.delete:
    index: my_index

  - do:
      acknowledge: true
      ilm.delete_lifecycle:
        policy: "my_lifecycle"
