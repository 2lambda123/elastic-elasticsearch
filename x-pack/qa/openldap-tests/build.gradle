apply plugin: 'elasticsearch.standalone-test'

dependencies {
  testImplementation(testArtifact(project(xpackModule('security'))))
  testImplementation(testArtifact(project(xpackModule('core'))))
  testImplementation project(":x-pack:test:idp-fixture")
  testImplementation "junit:junit:${versions.junit}"
  testImplementation "com.fasterxml.jackson.core:jackson-core:${versions.jackson}"
  testImplementation "com.fasterxml.jackson.core:jackson-annotations:${versions.jackson}"
}


tasks.named('test') {
  // test suite uses jks which is not supported in fips mode
  systemProperty 'tests.security.manager', 'false'
}
//testFixtures.useFixture ":x-pack:test:idp-fixture", "openldap"
//
//Project idpFixtureProject = project(":x-pack:test:idp-fixture")
//String outputDir = "${project.buildDir}/generated-resources/${project.name}"
//def copyIdpTrust = tasks.register("copyIdpTrust", Copy) {
//  from idpFixtureProject.file('openldap/certs/ca.jks');
//  from idpFixtureProject.file('openldap/certs/ca_server.pem');
//  into outputDir
//}
//project.sourceSets.test.output.dir(outputDir, builtBy: copyIdpTrust)
