[role="xpack"]
[[security-api-saml-authenticate]]

=== SAML Authenticate API

Submits a SAML response message to {es} for consumption. This SAML response can be a response to a
SAML authentication request that was previously created using the <<security-api-saml-prepare-authentication, SAML
Prepare Authentication API>> or an unsolicited SAML response in the case of IdP initiated Single Sign On flow.
Upon successful validation, {es} will respond with an {es} internal access token and refresh token that can be
subsequently used for authentication. This API endpoint basically exchanges SAML Responses that indicate
successful authentication in the IdP for {es} access and refresh tokens to be used for authentication against {es}.

{es} exposes all the necessary SAML related functionality via the SAML APIs. These APIs
are used internally by {kib} in order to provide SAML based authentication, but can also be used by other,
custom web applications or other clients. See also <<security-api-saml-prepare-authentication,SAML Prepare Authentication
API>> , <<security-api-saml-invalidate,SAML Invalidate API>> and <<security-api-saml-logout,SAML Logout API>>.


==== Request

`POST /_security/saml/authenticate`


==== Request Body

The following parameters can be specified in the body of the request:

`content`::
The SAML response as it was sent by the user's browser, usually a Base64 encoded XML document.

`ids`::
A json array with all the valid SAML Request Ids that the caller of the API has for the current user.

==== Examples

The following example exchanges a SAML Response indicating a successful authentication at the SAML IdP
for an {es} access token and refresh token to be used in subsequent requests.

[source,js]
--------------------------------------------------
POST /_security/saml/authenticate
{
  "content" : "PHNhbWxwOlJlc3BvbnNlIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIHhtbG5zOnNhbWw9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMD....."
  "ids" : ["4fee3b046395c4e751011e97f8900b5273d56685"]
}
--------------------------------------------------
// CONSOLE

The following example output contains the access token and refresh token that were generated in response,
the authenticated user's username, and the amount of time (inseconds) that the token expires in.

[source,js]
--------------------------------------------------
{
  "access_token" : "46ToAxZVaXVVZTVKOVF5YU04ZFJVUDVSZlV3",
  "username" : "Bearer",
  "expires_in" : 1200,
  "refresh_token": "mJdXLtmvTUSpoLwMvdBt_w"
}
--------------------------------------------------
// NOTCONSOLE
