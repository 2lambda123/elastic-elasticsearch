[role="xpack"]
[[security-api-clear-service-token-caches]]
=== Clear service account token caches API

beta::[]

++++
<titleabbrev>Clear service account token caches</titleabbrev>
++++

Evicts a subset of all entries from the service account token caches.
There are separate caches for tokens backed the `service_tokens` file
and tokens backed by the `.security` index.
The API will to clear matching entries from both caches.
In addition, the cache for `.security` index backed tokens is
automatically cleared on state changes of the security index
and the cache for `service_tokens` file backed tokens is
automatically cleared on file changes.

[[security-api-clear-service-token-caches-request]]
==== {api-request-title}

`POST /_security/service/{namespace}/{service}/credential/{name}/_clear_cache`

[[security-api-clear-service-token-caches-prereqs]]
==== {api-prereq-title}

* To use this API, you must have at least the `manage_security` cluster
privilege.

[[security-api-clear-service-token-caches-desc]]
==== {api-description-title}

For more information about service account tokens, see <<security-api-create-service-token>>,
<<security-api-get-service-credentials>>, and <<security-api-delete-service-token>>.

[[security-api-clear-service-token-caches-path-params]]
==== {api-path-parms-title}

`namespace`::
(Required, string) An identifier for the namespace.

`service`::
(Required, string) An identifier for the service name.

`name`::
(Required, string) Comma-separated list of token names to evict from the service account token caches.
To evict all tokens belong to a service account, use `*`. Does not support other wildcard patterns.

[[security-api-clear-service-token-caches-example]]
==== {api-examples-title}

The clear service account token caches API evicts entries from the service account token cache.
For example, to clear the entry of service account token with name `token1`.

[source,console]
--------------------------------------------------
POST /_security/service/elastic/fleet-server/credential/token/token1/_clear_cache
--------------------------------------------------

Specify multiple token names as a comma-separated list.

[source,console]
----
POST /_security/service/elastic/fleet-server/credential/token/token1,token2/_clear_cache
----

To clear all entries from the service account token caches, use `*`.

[source,console]
----
POST /_security/service/elastic/fleet-server/credential/token/*/_clear_cache
----
