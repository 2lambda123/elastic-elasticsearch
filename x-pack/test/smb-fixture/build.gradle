apply plugin: 'elasticsearch.build'

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "com.avast.gradle:docker-compose-gradle-plugin:0.4.5"
    }
}

apply plugin: "base"
apply plugin: 'docker-compose'

dockerCompose {
    useComposeFiles = ['docker-compose.yml']
    removeContainers = true // no persistent data!
    // MacOS does not allow writing to /usr/bin, but Linux installs it there on some distributions
    executable = file('/usr/local/bin/docker-compose').exists() ? '/usr/local/bin/docker-compose' : '/usr/bin/docker-compose'
}

/**
 * Allows for other subprojects to depend on the project level and not care about the details
 * of composeUp
 */
jar {
    dependsOn 'composeUp'
}

clean {
    dependsOn 'composeDown'
}

thirdPartyAudit.enabled = false
licenseHeaders.enabled = false
test.enabled = false
jarHell.enabled = false
