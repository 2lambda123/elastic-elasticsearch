setup:
  - skip:
      version: " - 8.12.99"
      reason: Introduced in 8.13.0

---
'Post connector secret':
  - do:
      connector_secret.post:
        body:
          value: my-secret
  - set: { id: id }
  - match: { id: $id }
  - do:
      connector_secret.get:
        id: $id
  - match: { value: my-secret }

---
'Post connector secret when id is missing should fail':
  - do:
      connector_secret.post:
        body:
          value: null
      catch: bad_request
