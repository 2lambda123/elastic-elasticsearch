setup:
  - do:
      indices.create:
        index: test-index
        body:
          settings:
            index:
              number_of_shards: 1
              number_of_replicas: 0
  - do:
      engine.put:
        engine_id: test-engine-to-delete
        body:
          indices: [ "test-index" ]

---
teardown:
  - do:
      engine.delete:
        engine_id: test-engine-to-delete
        ignore: 404

---
"Delete Engine":
  - do:
      engine.delete:
        engine_id: test-engine-to-delete

  - match: { acknowledged: true }

  - do:
      catch: "missing"
      engine.get:
        engine_id: test-engine-to-delete

  - do:
      indices.exists_alias:
        name: engine-test-engine-to-delete

  - is_false: ''

---
"Delete Engine - Index does not exist":
  - do:
      catch: "missing"
      engine.delete:
        engine_id: test-nonexistent-engine

