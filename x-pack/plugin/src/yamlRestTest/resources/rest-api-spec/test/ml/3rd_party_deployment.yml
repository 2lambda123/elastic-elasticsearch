---
"Test start deployment":

  - do:
      ml.put_trained_model:
        model_id: distilbert-finetuned-sst
        body: >
          {
            "description": "distilbert-base-uncased-finetuned-sst-2-english.pt",
            "model_type": "pytorch",
            "inference_config": {
              "classification": {
                "num_top_classes": 1
              }
            },
            "input": {
                "field_names": ["text_field"]
            },
            "definition": {
              "preprocessors" : [],
              "trained_model": {
                "pytorch": {
                  "model_id": "distilbert-finetuned-sst",
                  "index": "big_model",
                  "target_type": "classification"
                }
              }
            }
          }

  - do:
      ml.get_trained_models:
        model_id: distilbert-finetuned-sst
        include: definition
  - match: { trained_model_configs.0.definition.trained_model.pytorch.model_id: distilbert-finetuned-sst }

  - do:
      ml.start_deployment:
        model_id: distilbert-finetuned-sst
