---
"Null value":
  - skip:
      version: " - 7.99.99"
      reason: "unsigned_long was added in 8.0"

  - do:
      indices.create:
        index:  test1
        body:
          mappings:
            properties:
              ul:
                type: unsigned_long
                null_value: 17446744073709551615

  - do:
      bulk:
        index: test1
        refresh: true
        body: |
          { "index": {"_id" : "1"} }
          { "ul": 0 }
          { "index": {"_id" : "2"} }
          { "ul": null }
          { "index": {"_id" : "3"} }
          { "ul": ""}
          { "index": {"_id" : "4"} }
          { "ul": 18446744073709551615 }
          { "index": {"_id" : "5"} }
          {}

  # term query
  - do:
      search:
        index: test1
        body:
          query:
            term:
              ul: 17446744073709551615
  - match: { "hits.total.value": 2 }
  - match: {hits.hits.0._id: "2" }
  - match: {hits.hits.1._id: "3" }


  # asc sort
  - do:
      search:
        index: test1
        body:
          sort: { ul : { order: asc, missing : "_last" } }
  - match: { "hits.total.value": 5 }
  - match: {hits.hits.0._id: "1" }
  - match: {hits.hits.0.sort: [0.0] }
  - match: {hits.hits.1._id: "2" }
  - match: {hits.hits.1.sort: [1.7446744073709552E19] }
  - match: {hits.hits.2._id: "3" }
  - match: {hits.hits.2.sort: [1.7446744073709552E19] }
  - match: {hits.hits.3._id: "4" }
  - match: {hits.hits.3.sort: [1.8446744073709552E19] }
  - match: {hits.hits.4._id: "5" }

  # desc sort
  - do:
      search:
        index: test1
        body:
          sort: { ul: { order: desc, missing: "_first" } }
  - match: { "hits.total.value": 5 }
  - match: {hits.hits.0._id: "5" }
  - match: {hits.hits.1._id: "4" }
  - match: {hits.hits.1.sort: [1.8446744073709552E19] }
  - match: {hits.hits.2._id: "2" }
  - match: {hits.hits.2.sort: [1.7446744073709552E19] }
  - match: {hits.hits.3._id: "3" }
  - match: {hits.hits.3.sort: [1.7446744073709552E19] }
  - match: {hits.hits.4._id: "1" }
  - match: {hits.hits.4.sort: [0.0] }

