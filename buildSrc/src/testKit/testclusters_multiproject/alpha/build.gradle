plugins {
    id 'elasticsearch.testclusters'
}
testClusters {
    myTestCluster {
        distribution = 'ZIP'
        version = System.getProperty("test.version_under_test")
        plugin file("${System.getProperty("local.repo.path")}/plugins/ingest-geoip-${System.getProperty("test.version_under_test")}.zip")
        javaHome = file(System.getProperty('java.home'))
    }
}
task user1 {
    useCluster testClusters.myTestCluster
    doFirst {
        println "$path: Cluster running @ ${testClusters.myTestCluster.httpSocketURI}"
    }
}
task user2 {
    useCluster testClusters.myTestCluster
    doFirst {
        println "$path: Cluster running @ ${testClusters.myTestCluster.httpSocketURI}"
    }
}
