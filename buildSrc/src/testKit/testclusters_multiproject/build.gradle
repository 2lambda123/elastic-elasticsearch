plugins {
    id 'elasticsearch.testclusters'
}

allprojects {
    repositories {
        maven {
            url "https://artifacts.elastic.co/maven"
        }
        maven {
            url "https://snapshots.elastic.co/maven"
        }
    }
}

testClusters {
    myTestCluster
}

task user1 {
    useCluster testClusters.myTestCluster
    doLast {
        println "Cluster running @ ${testClusters.myTestCluster.httpSocketURI}"
    }
}

task user2 {
    useCluster testClusters.myTestCluster
    doLast {
        println "Cluster running @ ${testClusters.myTestCluster.httpSocketURI}"
    }
}