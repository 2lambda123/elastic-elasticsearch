plugins {
    id 'elasticsearch.clusterformation'
}

allprojects {
    repositories {
        mavenCentral()
    }
}

elasticsearchNodes {
    myTestCluster {
        distribution = 'ZIP'
        version = '6.2.0'
    }
}

task user1 {
    clusterFormation.use elasticsearchNodes.myTestCluster
    doLast {
        println "Cluster running @ ${elasticsearchNodes.myTestCluster.httpSocketURI}"
    }
}

task user2 {
    clusterFormation.use elasticsearchNodes.myTestCluster
    doLast {
        println "Cluster running @ ${elasticsearchNodes.myTestCluster.httpSocketURI}"
    }
}