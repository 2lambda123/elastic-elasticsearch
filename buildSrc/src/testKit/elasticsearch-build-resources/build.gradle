plugins {
    id 'elasticsearch.build'
}

ext.licenseFile = file("$buildDir/dummy/license")
ext.noticeFile = file("$buildDir/dummy/notice")

exportBuildResources {
    resource 'checkstyle.xml'
    resource 'minimumCompilerVersion'
}

task sampleCopyAll(type: Sync) {
    /** Note: no explicit dependency. This works with tasks that use the Provider API a.k.a "Lazy Configuration" **/
    from exportBuildResources
    into "$buildDir/sampleCopyAll"
}

task sample {
    // This does not work, task dependencies can't be providers
    // dependsOn exportBuildResources.resource('minimumRuntimeVersion')
    // Nor does this, despite https://github.com/gradle/gradle/issues/3811
    // dependsOn exportBuildResources.outputDir
    // for now it's just
    dependsOn exportBuildResources
    doLast {
        println "This task is using ${file(exportBuildResources.resource('minimumRuntimeVersion'))}"
    }
}