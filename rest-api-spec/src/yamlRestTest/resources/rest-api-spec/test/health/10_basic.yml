---
"cluster health basic test":
  - skip:
      version: "- 8.0.99"
      reason: "health was only added in 8.1.0"

  - do:
      health: {}

  - is_true:   cluster_name
  - match:     { status: "green" }
  - match:     { impacts: [] }
  - match:     { components.controller.status: "GREEN" }
  - match:     { components.controller.indicators.0.status: "GREEN" }
  - match:     { components.controller.indicators.0.name: "instance has master" }
  - match:     { components.controller.indicators.0.explain: "health coordinating instance has a master node" }
  - match:     { components.backups.status: "GREEN" }
