---
"node removal prevalidation basic test":
  - skip:
      features: contains
      version: "- 8.5.99"
      reason: "API added in 8.6.0"

  # Fetch a node ID and stash it in node_id
  - do:
      nodes.info: { }
  - set:
      nodes._arbitrary_key_: node_id
  # Prevalidate its removal
  - do:
      _internal.prevalidate_node_removal:
        ids: $node_id

  - match: { result.is_safe: "YES"}
  - contains: {nodes: {id: "$node_id", result: {is_safe: "YES", reason: ""}}}
