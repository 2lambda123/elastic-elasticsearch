---
"node removal prevalidation basic test":
  - skip:
      version: "- 8.4.99"
      reason: "API added in 8.5.0"

  # Fetch a node ID and stash it in node_id
  - do:
      nodes.info: { }
  - set:
      nodes._arbitrary_key_: node_id
  # Prevalidate its removal
  - do:
      _internal.prevalidate_node_removal:
        node: $node_id

  - match: { result.is_safe: "YES"}
  - match: { result.$node_id.is_safe: "YES"}
