keyword:
  - skip:
      version: " - 8.1.99"
      reason: introduced in 8.2.0

  - do:
      indices.create:
        index: test
        body:
          mappings:
            _source:
              synthetic: true
            properties:
              kwd:
                type: keyword

  - do:
      index:
        index:   test
        id:      1
        refresh: true
        body:
          kwd: foo

  - do:
      search:
        index: test
        body:
          query:
            ids:
              values: [1]
  - match:
      hits.hits.0._source:
        kwd: foo

---
object:
  - skip:
      version: " - 8.1.99"
      reason: introduced in 8.2.0

  - do:
      indices.create:
        index: test
        body:
          mappings:
            _source:
              synthetic: true
            properties:
              o1:
                type: object
              o2:
                properties:
                  kwd:
                    type: keyword

  - do:
      index:
        index:   test
        id:      1
        refresh: true
        body:
          o2.kwd: foo

  - do:
      search:
        index: test
        body:
          query:
            ids:
              values: [1]
  - match:
      hits.hits.0._source:
        o2:
          kwd: foo
