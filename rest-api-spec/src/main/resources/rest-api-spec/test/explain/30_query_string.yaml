---
"explain with query_string parameters":
  - skip:
      features:
        - warnings

  - do:
      warnings:
        - 'The [_all] field is deprecated and will be removed in Elasticsearch 6.0'
      indices.create:
          index:  test
          body:
            mappings:
              test:
                _all:
                  enabled: false
                properties:
                  number:
                    type: integer

  - do:
      index:
          index:  test
          type:   test
          id:     1
          body:   { field: foo bar}

  - do:
      indices.refresh:
        index: [test]

  - do:
      explain:
        index:  test
        type:   test
        id:     1
        q: bar
        df: field

  - is_true: matched

  - do:
      explain:
        index:  test
        type:   test
        id:     1
        q: field:foo field:xyz

  - is_true: matched

  - do:
      explain:
        index:  test
        type:   test
        id:     1
        q: field:foo field:xyz
        default_operator: AND

  - is_false: matched

  - do:
      explain:
        index:  test
        type:   test
        id:     1
        q: field:bars
        analyzer: snowball

  - is_true: matched

  - do:
      explain:
        index:  test
        type:   test
        id:     1
        q: field:BA*

  - is_true: matched

  - do:
      explain:
        index:  test
        type:   test
        id:     1
        q: number:foo
        lenient: true

  - is_false: matched
