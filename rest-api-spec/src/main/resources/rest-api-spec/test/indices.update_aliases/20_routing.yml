setup:
  - do:
      indices.create:
        index: test_index

---
"Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                routing: routing

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'index_routing': 'routing', 'search_routing': 'routing', 'is_write_index': true }}

---
"Index Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                index_routing: index_routing

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'index_routing': 'index_routing', 'is_write_index': true }}

---
"Search Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                search_routing: search_routing

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'search_routing': 'search_routing', 'is_write_index': true }}

---
"Index, Default Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                index_routing: index_routing
                routing: routing

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'index_routing': 'index_routing', 'search_routing': 'routing', 'is_write_index': true }}

---
"Search, Default Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                search_routing: search_routing
                routing: routing

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'index_routing': 'routing', 'search_routing': 'search_routing', 'is_write_index': true }}

---
"Index, Search, Default Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                index_routing: index_routing
                search_routing: search_routing
                routing: routing

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'index_routing': 'index_routing', 'search_routing': 'search_routing', 'is_write_index': true }}

---
"Numeric Routing":

  - do:
      indices.update_aliases:
        body:
          actions:
            - add:
                index: test_index
                alias: test_alias
                routing: 5

  - do:
      indices.get_alias:
        index: test_index

  - match: {test_index.aliases.test_alias: {'index_routing': '5', 'search_routing': '5', 'is_write_index': true }}

