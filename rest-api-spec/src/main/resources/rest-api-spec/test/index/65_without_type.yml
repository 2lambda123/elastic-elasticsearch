---
"Index without type":
 - skip:
      version: " - 5.99.99" # TODO update this once backported
      reason:  typeless URLs are only available from 5.5.0 on
 - do:
      index:
          index:  test_index
          id:     42
          body:   { foo: bar }

 - match:   { _index:   test_index }
 - match:   { _type:    doc}
 - match:   { _id:      "42"}
 - match:   { _version: 1}


 - do:
      get:
          index:  test_index
          id:     42

 - match:   { _index:   test_index }
 - match:   { _type:    doc }
 - match:   { _id:      "42"}
 - match:   { _version: 1}
 - match:   { _source: { foo: bar }}


---
"Index without ID":
 - skip:
      version: " - 5.99.99" # TODO update this once backported
      reason:  typeless URLs are only available from 5.5.0 on
 - do:
      index:
          index:  test_index
          body:   { foo: bar }

 - is_true:   _id
 - match:   { _index:   test_index }
 - match:   { _type:    doc   }
 - match:   { _version: 1      }
 - set:     { _id:      id    }

 - do:
      get:
          index:  test_index
          id:     '$id'

 - match:   { _index:   test_index }
 - match:   { _type:    doc   }
 - match:   { _id:      $id    }
 - match:   { _version: 1      }
 - match:   { _source: { foo: bar }}

