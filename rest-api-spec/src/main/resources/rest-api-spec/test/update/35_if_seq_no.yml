---
"Internal version":

 - skip:
      version: " - 6.99.99"
      reason: if_seq_no was added in 7.0

 - do:
      catch:        missing
      update:
          index:    test_1
          id:       1
          if_seq_no:  1
          if_primay_term:  1
          body:
            doc:    { foo: baz }

 - do:
      index:
          index:    test_1
          id:       1
          body:
            doc:    { foo: baz }

 - do:
      catch:        conflict
      update:
          index:    test_1
          id:       1
          if_seq_no:  2
          if_primay_term:  1
          body:
            doc:    { foo: baz }

 - do:
     update:
       index:    test_1
       id:       1
       if_seq_no:  1
       if_primay_term:  1
       body:
         doc:    { foo: bar }

 - do:
     get:
       index:    test_1
       id:       1

 - match: { _source:  { foo: bar } }
