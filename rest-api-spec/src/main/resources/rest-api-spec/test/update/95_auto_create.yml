---
"Set require_alias flag":
  - skip:
      # TODO adjust after backport
      version: " - 7.99.99"
      reason: "require_alias flag added in 7.9+"
  - do:
      catch: missing
      update:
        index:            test_1_autocreate
        id:               1
        require_alias:   true
        body:
          doc:            { foo: bar, count: 1 }
          doc_as_upsert:  true
  - do:
      update:
        index:            test_1_autocreate
        id:               1
        require_alias:   false
        body:
          doc:            { foo: bar, count: 1 }
          doc_as_upsert:  true
