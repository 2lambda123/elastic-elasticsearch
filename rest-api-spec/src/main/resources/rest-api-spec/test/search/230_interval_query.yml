setup:
  - skip:
    - version: " - 6.99.99"
    - reason:  "Implemented in 7.0"

  - do:
        indices.create:
          index:  test
          body:
            mappings:
              test:
                properties:
                  text:
                    type: text
                    analyzer: standard
  - do:
        bulk:
          refresh: true
          body:
            - '{"index": {"_index": "test", "_type": "test", "_id": "1"}}'
            - '{"text" : "Some like it hot, some like it cold"}'
            - '{"index": {"_index": "test", "_type": "test", "_id": "2"}}'
            - '{"text" : "Its cold outside, theres no kind of atmosphere"}'
            - '{"index": {"_index": "test", "_type": "test", "_id": "3"}}'
            - '{"text" : "Baby its cold there outside"}'
            - '{"index": {"_index": "test", "_type": "test", "_id": "4"}}'
            - '{"text" : "Outside it is cold and wet"}'

  - do:
        search:
          index: test
          body:
            query:
              intervals:
                field: text
                source:
                  match: "cold outside"
                  ordered: true
  - match:
        count: { hits.total: 2 }

  - do:
        search:
          index: test
          body:
            query:
              intervals:
                field: text
                source:
                  match: "cold outside"
                  ordered: false
  - match:
        count: { hits.total: 3 }


